kind: Deployment
apiVersion: extensions/v1beta1
metadata:
  name: xap-node
spec:
  replicas: 3
  template:
    metadata:
      labels:
        app: xap-node
        version: 12.1.0
    spec:
      containers:
      - args:
        - --manager
        env:
        - name: XAP_LICENSE_KEY
          valueFrom:
            secretKeyRef:
              name: xap-license-secret
              key: xap-license
        - name: XAP_GSM_OPTIONS
          valueFrom:
            configMapKeyRef:
              name: xap-config-map
              key: xap-gsm-options
        - name: XAP_GSC_OPTIONS
          valueFrom:
            configMapKeyRef:
              name: xap-config-map
              key: xap-gsc-options
        - name: XAP_LUS_OPTIONS
          valueFrom:
            configMapKeyRef:
              name: xap-config-map
              key: xap-lus-options
        image: <image>
        imagePullPolicy: Always #For development. Always pull the image
        name: xap-node
        resources: {}
        securityContext:
          privileged: false
        terminationMessagePath: /dev/termination-log
      dnsPolicy: ClusterFirst
      imagePullSecrets:
      - name: <imagePullSecret>
      restartPolicy: Always
      securityContext: {}
      terminationGracePeriodSeconds: 30